<!DOCTYPE html>
<html>
  <head>
    <script src="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poltawski+Nowy:ital,wght@1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="{{ url_for('static', filename='secret_key.js') }}"></script>

    <link
      type="text/css"
      rel="stylesheet"
      href="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.css"
    />
    <title>FalseSocial</title>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="main">
      <div id="left" class="left" hidden="true">
        <div class="PageName">
          <form class="Soc" action="/home_page/{{cur_id}}">
            <button class="SocialButton">
              <h1 class="Social" style="color: darkblue">FalseSocial</h1>
            </button>
          </form>
        </div>
        <div class="Home">
          <form class="Hom" action="/home_page/{{cur_id}}">
            <button class="HomeButton">
              <i class="fa fa-home" aria-hidden="true"></i>
              Home
            </button>
          </form>
        </div>
        <div class="Search">
          <form class="Sear" action="/search">
            <button class="SearchButton">
              <i class="fa fa-search"></i>
              Search
            </button>
          </form>
        </div>
        <div class="Create">
          <button class="CreateButton" onclick="OpenPopup()">
            <i class="fa fa-pencil"></i>
            Create
          </button>
        </div>
        <div class="Profile">
          <form class="Prof" action="/profile_page/{{cur_id}}">
            <button class="ProfileButton">
              <i class="fa fa-address-book"></i>
              Profile
            </button>
          </form>
        </div>

        <button class="sign-out" id="sign-out" hidden="true">Sign out</button>
      </div>
      <div class="center">
        <p id="sign-in" hidden="false">Sign in/Sign up</p>
        <div id="firebase-auth-container"></div>
        <div id="login-info" hidden="true">
          {%if accept%}
          <div class="profile-page">
            <div class="header">
              {%if not your_page%}
              <div class="UserNameFollow">
                <div class="user_name">
                  <p>{{user_name}}</p>
                </div>
                <div class="follow-unfollow">
                  {%if not followed%}
                  <form action="/follow/{{user_id}}">
                    <button class="follow-unfollowButton">Follow</button>
                  </form>
                  {%else%}
                  <form action="/unfollow/{{user_id}}">
                    <button class="follow-unfollowButton">Unfollow</button>
                  </form>
                  {%endif%}
                </div>
              </div>
              {%else%}
              <div class="my_user_name">
                <p style="font-size: xx-large">{{user_name}}</p>
              </div>
              {%endif%}
              <div class="follow">
                <div class="your_followers">
                  <form action="/followers/{{user_id}}">
                    <button
                      style="font-family: Arial; font-size: x-large"
                      type="submit"
                      class="btn btn-link"
                    >
                      <strong>{{num_followers}}</strong>
                      {%if num_followers != 1%} followers {%else%} follower
                      {%endif%}
                    </button>
                  </form>
                </div>
                <div class="your_followings">
                  <form action="/followings/{{user_id}}">
                    <button
                      style="font-family: Arial; font-size: x-large"
                      type="submit"
                      class="btn btn-link"
                    >
                      <strong>{{num_following}}</strong> {%if num_following !=
                      1%} followings {%else%} following {%endif%}
                    </button>
                  </form>
                </div>
              </div>
              <div class="ProfileName">
                <p style="font-family: Arial; font-size: xx-large">
                  {{profile_name}}
                </p>
              </div>
            </div>
            <div class="posts">
              <div id="PopUp" class="PopUp">
                <h2>Create a post:</h2>
                <form
                  class="AddPhoto"
                  action="/upload_file/{{cur_id}}"
                  method="post"
                  enctype="multipart/form-data"
                >
                  Upload File:
                  <input class="UploadFile" type="file" name="file_name" />
                  <input class="PhotoSubmit" type="submit" />
                </form>
                <button class="close" onclick="ClosePopup()">Close</button>
              </div>
              <div id="After" class="postPhotos">
                {%if not posts%}
                <div class="messageDiv">
                  <p class="theMessage" style="font-size: xx-large">
                    You haven't created any posts
                  </p>
                </div>
                {%else%}
                <div class="Photos">
                  {%for post in posts%}
                  <div class="myPost">
                    <a href="/see_post/{{posts[loop.index0]}}">
                      <div
                        style="width: 97.5%; height: 390px;
                                  background-image: url('{{ post_urls[loop.index0] }}');
                                  background-position: top;
                                  background-size: auto 100%;"
                      ></div>
                    </a>
                  </div>
                  {%endfor%}
                </div>
                {%endif%}
              </div>
            </div>
          </div>
          {% elif error_message %}
          <p>Error Message: {{ error_message }}</p>
          {% endif %}
        </div>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-auth.js"></script>
    <script src="{{ url_for('static', filename='app-setup.js') }}"></script>
    <script src="{{ url_for('static', filename='pop-up.js') }}"></script>
  </body>
</html>
